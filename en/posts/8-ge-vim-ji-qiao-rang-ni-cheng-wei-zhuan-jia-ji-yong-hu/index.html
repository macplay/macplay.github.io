<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Nikola (getnikola.com)">
<title>【译】8 个 Vim 技巧让你成为专家级用户 - MacPlay</title>
<link rel="apple-touch-icon" sizes="180x180" href="../../../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../../favicon-16x16.png">
<link rel="mask-icon" href="../../../safari-pinned-tab.svg" color="#5bbad5">
<link href="../../../assets/css/semantic.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/jquery.fancybox.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="canonical" href="https://macplay.github.io/en/posts/8-ge-vim-ji-qiao-rang-ni-cheng-wei-zhuan-jia-ji-yong-hu/">
<meta name="author" content="ashfinal">
<link rel="alternate" hreflang="zh_cn" href="../../../posts/8-ge-vim-ji-qiao-rang-ni-cheng-wei-zhuan-jia-ji-yong-hu/">
<link rel="stylesheet" type="text/css" href="../../../assets/css/gitalk.css">
</head>
<body>
        <div class="ui grid">
            <div class="computer only three wide column no-print">
                <div id="left-side">
                </div>
            </div>
            <div class="ten wide computer sixteen wide tablet sixteen wide mobile column">
                        <div class="ui inline cookie nag no-print">
            <span class="title">从现在开始，支持中英双语及博文精选 O(∩_∩)O~~</span>
            <i class="close icon"></i>
        </div>
    <header id="header" class="no-print"><div class="ui grid">
        <div class="computer only tablet only sixteen wide column">
            <div class="ui large secondary stackable menu">
                <a class="header item brand-logo" href="https://macplay.github.io/en/">
                    MacPlay
                </a>
                        <a class="item" href="../../../">Posts</a>
                        <a class="item" href="../../../listings/">Code</a>
                        <a class="item" href="../../../galleries/">Gallery</a>
                        <a class="item" href="../../../categories/">Tags</a>
                        <a class="item" href="../../../archive.html">Archive</a>
                <div class="right menu">
                    <a class="item" href="../../../rss.xml"><i class="rss icon"></i>RSS</a>
                </div>
            </div>
        </div>
        <div class="mobile only sixteen wide column">
            <div class="ui fluid accordion vertical menu">
                <div class="item">
                    <a class="title">MacPlay</a>
                    <div class="content">
                                <a class="item" href="../../../">Posts</a>
                                <a class="item" href="../../../listings/">Code</a>
                                <a class="item" href="../../../galleries/">Gallery</a>
                                <a class="item" href="../../../categories/">Tags</a>
                                <a class="item" href="../../../archive.html">Archive</a>
                        <a class="item" href="../../../rss.xml"><i class="rss icon"></i>RSS</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </header><main id="main"><div id="main-content">
<div class="postpage post-text page-body" itemscope="itemscope" itemtype="http://schema.org/Article">
            <h1 class="post-title" itemprop="headline">
        <a href=".">【译】8 个 Vim 技巧让你成为专家级用户</a>
    </h1>

    <div class="ui large horizontal link list post-meta">
        <span class="item">By
            <a href="../../authors/ashfinal/">ashfinal</a>
        </span>
            <span class="item">
                <a href="https://github.com/macplay/macplay.github.io/edit/src/posts/8-ge-vim-ji-qiao-rang-ni-cheng-wei-zhuan-jia-ji-yong-hu.rst" target="_blank" title="Edit on GitHub">Edit</a>
            </span>
        <span class="item">
            <time datetime="2017-11-02T20:44:53+08:00">
            2017-11-02 20:44
            </time></span>
            <span class="item">
                    <a href="../../categories/terminal/">terminal</a>
                    <a href="../../categories/translation/">translation</a>
                    <a href="../../categories/vim/">vim</a>
            </span>
    </div>

    
    <div class="post-content" itemprop="article text">
        <div id="post-content">
        <div>
<p><strong>提要</strong> ：在这篇文章里，我将用实际例子向你展示一些我最喜爱的 <strong>Vim 技巧</strong> 。如果你不使用 Vim，这些技巧并不会给你多少理由让你想使用它。但是，如果你已经在使用，那本文无疑会让你成为更专业的 Vim 用户。</p>
<p>即便最近开始，我越来越多地使用 <a class="reference external" href="https://atom.io/">Atom</a> ，然而不使用 <a class="reference external" href="http://www.vim.org/">Vim</a> 却让我一天也过不下去。并不是因为我不得不使用它，而是这样做让我感到很舒适。</p>
<p>是的，舒适。当谈及 Vi 编辑器或任何它的变种时，这是个太奇怪的词语，对不对？的确，我承认，Vi 不是那个最符合直觉的文本编辑器。</p>
<p>但是，经过一些实践及记忆训练后，你可以通过仅仅几次击键，就能完成看似复杂的编辑任务，使用一些别的命令行编辑器无法实现的功能。</p>
<p>尽管如此，今天我并不想写“Vi 入门介绍”，我想通过个人常用的技巧——一些在其它编辑器中我梦寐以求的技巧，向你展示 Vi(m) 编辑器的真正威力。我并不会对这些技巧做全面的阐释，但我强烈推荐你反复试验，直到你理解它们是如何工作的。</p>
<p>如果你喜欢 Vim 并想完全掌握它，你也可以参与由 Linux Training Academy 提供的 Vim 在线课程。</p>
<!-- TEASER_END -->
<div class="figure align-center">
<img alt="/images/vim-tips-tricks.jpg" src="../../../images/vim-tips-tricks.jpg">
</div>
<p>我再重申一遍 ：强烈推荐你自行尝试一下这些例子。糟糕的是，WordPress 在精确展示例子和命令方面做得并不好——特别是空行和引用。所以，为了便宜行事，你可以从以下链接下载本文使用的样本 ：</p>
<p class="fluid ui small basic blue button"><a class="reference external" href="https://github.com/YesIKnowIT/VIM01">下载练习用的 Vim 例子</a></p>
<p>每个例子均附带有原文本（.orig）和执行 Vim 命令 的 Bash 脚本（.sh）。</p>
<div class="contents local topic" id="id2">
<p class="topic-title">文档目录</p>
<ul class="auto-toc simple">
<li><p><a class="reference internal" href="#id3" id="id23"><span class="sectnum">1</span> 改变单词大小写</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id24"><span class="sectnum">2</span> Vim 搜索和替换</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id25"><span class="sectnum">3</span> 随意移动跳转</a></p></li>
<li><p><a class="reference internal" href="#id12" id="id26"><span class="sectnum">4</span> 指定范围内运行命令</a></p></li>
<li><p><a class="reference internal" href="#id17" id="id27"><span class="sectnum">5</span> Vim 管道命令</a></p></li>
<li><p><a class="reference internal" href="#id20" id="id28"><span class="sectnum">6</span> 更少键盘输入</a></p></li>
<li><p><a class="reference internal" href="#id21" id="id29"><span class="sectnum">7</span> Vim 中获取帮助</a></p></li>
<li><p><a class="reference internal" href="#id22" id="id30"><span class="sectnum">8</span> Vim 中使用脚本</a></p></li>
</ul>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id23"><span class="sectnum">1</span> 改变单词大小写</a></h2>
<p>难道只有我觉得该功能特别好用？又或者我命中注定与这些家伙们一起工作——他们全都相信单词大写这事很酷？</p>
<p>不管怎样，当编写代码时，添加版权声明时，甚至拷贝粘贴时，通常仍然需要改变单词大小写。而在这一点上，Vim 编辑器要比 Vi 高明的多。每天我都由衷感激 Bram Moolenaar <a class="footnote-reference brackets" href="#id5" id="id4">1</a> 的卓越工作 ：</p>
<dl class="footnote brackets">
<dt class="label" id="id5"><span class="brackets"><a class="fn-backref" href="#id4">1</a></span></dt>
<dd>
<p><a class="reference external" href="http://www.vim.org/">Vim</a> 编辑器作者——译者注</p>
</dd>
</dl>
<p><strong>原文本</strong> ：</p>
<pre class="code text"><a name="rest_code_4bc5912689a2450b984766d49bc724f7-1"></a>copyright (c) &lt;year&gt; by &lt;copyright holder&gt;
<a name="rest_code_4bc5912689a2450b984766d49bc724f7-2"></a>Usage of the works is permitted provided that this instrument is retained with the works, so that any entity that uses the works is notified of this instrument.
<a name="rest_code_4bc5912689a2450b984766d49bc724f7-3"></a>Disclaimer: the works are without warranty.
</pre>
<p><strong>命令</strong> ：</p>
<table>
<colgroup>
<col style="width: 28%">
<col style="width: 72%">
</colgroup>
<tbody>
<tr>
<td><p><code class="docutils literal">~</code></p></td>
<td><p>切换大小写</p></td>
</tr>
<tr>
<td><p><code class="docutils literal">:$norm gUU</code></p></td>
<td><p>将最后一行的单词转换为大写（Vi 不适用）</p></td>
</tr>
</tbody>
</table>
<p><strong>修改后的文本</strong> ：</p>
<pre class="literal-block"><span class="amend">C</span>opyright (c) &lt;year&gt; by &lt;copyright holder&gt;
Usage of the works is permitted provided that this instrument is retained with the works, so that any entity that uses the works is notified of this instrument.
<span class="amend">DISCLAIMER: THE WORKS ARE WITHOUT WARRANTY.</span></pre>
<div class="figure align-center">
<img alt="/images/changing-capitalization.png" src="../../../images/changing-capitalization.png">
</div>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id24"><span class="sectnum">2</span> Vim 搜索和替换</a></h2>
<p>我每天都在使用。为何其它文本编辑器没有该功能？当然，它们多数有所谓的搜索替换，但是有多少拥有正则匹配替换的功能呢？诚然，正则替换要比基本的字符替换要复杂些，但是没有这一功能我简直无法想象。有时候我不得不从某些 GUI 编辑器中拷贝/粘贴到终端，运行 <cite>sed</cite> 命令处理后再拷贝/粘贴回来。而 Vi 编辑器在大约 40 年前就有这一功能了。</p>
<p><strong>原文本</strong> ：</p>
<pre class="code text"><a name="rest_code_92d08fc0958d4a8d8d7819353e42f68a-1"></a>Does a boy get a chance to paint black a fence every day? That put the thing in a new light. Ben Rogers stopped nibbling his apple. Tom swept his brush daintily back and forth–stepped back to note the effect–added a touch here and there–criticised the effect again–Ben watching every move and getting more and more interested, more and more absorbed.
</pre>
<p><strong>命令</strong> ：</p>
<table>
<colgroup>
<col style="width: 51%">
<col style="width: 49%">
</colgroup>
<tbody>
<tr>
<td><p><code class="docutils literal">:s/black/white/</code></p></td>
<td><p>将第一处的 <cite>black</cite> 替换为 <cite>white</cite></p></td>
</tr>
<tr>
<td><p><code class="docutils literal">:s/Ben\( <span class="pre">Rogers\)\@!/Ben</span> Rogers/g</code> <a class="footnote-reference brackets" href="#id9" id="id7">2</a></p></td>
<td><p>将每一处 <cite>Ben</cite> 替换为 <cite>Ben Rogers</cite>，除非 <cite>Rogers</cite> 已经存在</p></td>
</tr>
<tr>
<td><p><code class="docutils literal"><span class="pre">:s/.*/&lt;p&gt;\r&amp;\r&lt;\/p&gt;/</span></code> <a class="footnote-reference brackets" href="#id10" id="id8">3</a></p></td>
<td><p>将该行用 <cite>&lt;p&gt;</cite> 和 <cite>&lt;/p&gt;</cite> 包裹起来</p></td>
</tr>
<tr>
<td><p><code class="docutils literal"><span class="pre">:-1s/--/\&amp;mdash;/g</span></code></p></td>
<td><p>将前一行中的每一处 <cite>--</cite> 替换为 <cite>&amp;mdash;</cite></p></td>
</tr>
</tbody>
</table>
<dl class="footnote brackets">
<dt class="label" id="id9"><span class="brackets"><a class="fn-backref" href="#id7">2</a></span></dt>
<dd>
<p>此处用到了正则表达式的零宽断言（zero-width），这一语法在有些编程语言中也被称为环视（look-around）。Vim 的正则表达式语法，可输入 <cite>:h magic</cite> 查看。——译者注</p>
</dd>
<dt class="label" id="id10"><span class="brackets"><a class="fn-backref" href="#id8">3</a></span></dt>
<dd>
<p>使用 <a class="reference external" href="https://github.com/tpope/vim-surround">vim-surround 插件</a> 显然要更简单些。——译者注</p>
</dd>
</dl>
<p><strong>修改后的文本</strong> ：</p>
<pre class="literal-block"><span class="amend">&lt;p&gt;</span>
Does a boy get a chance to paint <span class="amend">white</span> a fence every day? That put the thing in a new light. Ben Rogers stopped nibbling his apple. Tom swept his brush daintily back and forth<span class="amend">&amp;mdash;</span> stepped back to note the effect<span class="amend">&amp;mdash;</span> added a touch here and there<span class="amend">&amp;mdash;</span> criticised the effect again<span class="amend">&amp;mdash;Ben Rogers</span> watching every move and getting more and more interested, more and more absorbed.
<span class="amend">&lt;/p&gt;</span></pre>
<div class="figure align-center">
<img alt="/images/those-picket-fences-recall-me-of-the-letters-v-i-m.jpg" src="../../../images/those-picket-fences-recall-me-of-the-letters-v-i-m.jpg">
</div>
</div>
<div class="section" id="id11">
<h2><a class="toc-backref" href="#id25"><span class="sectnum">3</span> 随意移动跳转</a></h2>
<p>是的，拷贝粘贴和鼠标拖放是不错的功能。只是有时候这样做很让人烦 ：我需要滚动文档找到正确位置以粘贴我的文本，然后再向反方向滚动将光标移回到它的初始位置。</p>
<p><strong>原文本</strong> ：</p>
<pre class="code text"><a name="rest_code_648f07d9ce1346cab2cf53a32f010591-1"></a>Pros:
<a name="rest_code_648f07d9ce1346cab2cf53a32f010591-2"></a>* Fast
<a name="rest_code_648f07d9ce1346cab2cf53a32f010591-3"></a>* Powerfull
<a name="rest_code_648f07d9ce1346cab2cf53a32f010591-4"></a>* Reliable
<a name="rest_code_648f07d9ce1346cab2cf53a32f010591-5"></a>* Not user-friendly
<a name="rest_code_648f07d9ce1346cab2cf53a32f010591-6"></a>
<a name="rest_code_648f07d9ce1346cab2cf53a32f010591-7"></a>Cons:
<a name="rest_code_648f07d9ce1346cab2cf53a32f010591-8"></a>* Portable
<a name="rest_code_648f07d9ce1346cab2cf53a32f010591-9"></a>* Addictive
</pre>
<p><strong>命令</strong> ：</p>
<table>
<colgroup>
<col style="width: 37%">
<col style="width: 63%">
</colgroup>
<tbody>
<tr>
<td><p><code class="docutils literal">/Power/</code></p></td>
<td><p>跳转到包含 <cite>Power</cite> 的第一行</p></td>
</tr>
<tr>
<td><p><code class="docutils literal">ddp</code></p></td>
<td><p>将当前行与下一行互换</p></td>
</tr>
<tr>
<td><p><code class="docutils literal"><span class="pre">:/user-friendly/m$</span></code></p></td>
<td><p>将包含 <cite>user-friendly</cite> 的行移到文件末尾</p></td>
</tr>
<tr>
<td><p><code class="docutils literal">g;</code></p></td>
<td><p>将光标移动到之前的位置</p></td>
</tr>
<tr>
<td><p><code class="docutils literal"><span class="pre">:/Cons/+1m-2</span></code></p></td>
<td><p>将包含 <cite>Cons</cite> 的下一行向上移两行</p></td>
</tr>
</tbody>
</table>
<p><strong>修改后的文本</strong> ：</p>
<pre class="literal-block">Pros:
* Fast
* Reliable
<span class="amend">* Powerfull</span>
<span class="amend">* Portable</span>

Cons:
* Addictive
<span class="amend">* Not user-friendly</span></pre>
<div class="figure align-center">
<img alt="/images/moving-things-around-in-no-time.png" src="../../../images/moving-things-around-in-no-time.png">
</div>
</div>
<div class="section" id="id12">
<h2><a class="toc-backref" href="#id26"><span class="sectnum">4</span> 指定范围内运行命令</a></h2>
<p>GUI 编辑器允许你对整个文件运行命令，或者仅针对当前选区。有时候，还可以有更多选项，譬如光标前后。但是 Vi(m) 编辑器允许你对使用命令的范围给出一个更容易理解的描述 ：</p>
<p><strong>原文本</strong> ：</p>
<pre class="code text"><a name="rest_code_0486c7bef79b44ea9c901d4665a38090-1"></a>&lt;div&gt;
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-2"></a>
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-3"></a>&lt;table&gt;
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-4"></a>
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-5"></a>&lt;tr&gt;&lt;td&gt;Pen name&lt;/td&gt;&lt;td&gt;Real name&lt;/td&gt;&lt;/tr&gt;
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-6"></a>
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-7"></a>&lt;tr&gt;&lt;td&gt;Mark Twain&lt;/td&gt;&lt;td&gt;Samuel Clemens&lt;/td&gt;&lt;/tr&gt;
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-8"></a>
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-9"></a>&lt;tr&gt;&lt;td&gt;Lewis Carroll&lt;/td&gt;&lt;td&gt;Charles Dodgson&lt;/td&gt;&lt;/tr&gt;
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-10"></a>
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-11"></a>&lt;tr&gt;&lt;td&gt;Richard Bachman&lt;/td&gt;&lt;td&gt;Stephen King&lt;/td&gt;&lt;/tr&gt;
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-12"></a>
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-13"></a>&lt;/table&gt;
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-14"></a>
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-15"></a>&lt;p&gt;Many writers have chosen to write under a pen name.&lt;/p&gt;
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-16"></a>
<a name="rest_code_0486c7bef79b44ea9c901d4665a38090-17"></a>&lt;/div&gt;
</pre>
<p><strong>命令</strong> ：</p>
<table>
<colgroup>
<col style="width: 48%">
<col style="width: 52%">
</colgroup>
<tbody>
<tr>
<td><p><code class="docutils literal"><span class="pre">:/&lt;table&gt;/,/&lt;\/table&gt;/g/^$/d</span></code> <a class="footnote-reference brackets" href="#id15" id="id13">4</a></p></td>
<td><p>将 <cite>&lt;table&gt;</cite> 与 <cite>&lt;/table&gt;</cite> 之间的空行删除</p></td>
</tr>
<tr>
<td><p><code class="docutils literal"><span class="pre">:/^$/;/^$/-1m1</span></code> <a class="footnote-reference brackets" href="#id16" id="id14">5</a></p></td>
<td><p>将接下来两个空行之间的文本移到第一行之后</p></td>
</tr>
<tr>
<td><p><code class="docutils literal"><span class="pre">:2,$-1&gt;</span></code></p></td>
<td><p>缩进第 2 行到倒数第 1 行之间的文本</p></td>
</tr>
</tbody>
</table>
<dl class="footnote brackets">
<dt class="label" id="id15"><span class="brackets"><a class="fn-backref" href="#id13">4</a></span></dt>
<dd>
<p>切到 Visual 模式使用选区更直观简单些。不过此处作者为了演示范围（range）用法，也无可厚非。——译者注</p>
</dd>
<dt class="label" id="id16"><span class="brackets"><a class="fn-backref" href="#id14">5</a></span></dt>
<dd>
<p>不太清楚 <cite>;</cite> 表达什么意思。如有读者解读，不胜感激。——译者注</p>
</dd>
</dl>
<p><strong>修改后的文本</strong> ：</p>
<pre class="literal-block">&lt;div&gt;

    <span class="amend">&lt;p&gt;Many writers have chosen to write under a pen name.&lt;/p&gt;</span>

    <span class="amend">&lt;table&gt;</span>
    <span class="amend">&lt;tr&gt;&lt;td&gt;Pen name&lt;/td&gt;&lt;td&gt;Real name&lt;/td&gt;&lt;/tr&gt;</span>
    <span class="amend">&lt;tr&gt;&lt;td&gt;Mark Twain&lt;/td&gt;&lt;td&gt;Samuel Clemens&lt;/td&gt;&lt;/tr&gt;</span>
    <span class="amend">&lt;tr&gt;&lt;td&gt;Lewis Carroll&lt;/td&gt;&lt;td&gt;Charles Dodgson&lt;/td&gt;&lt;/tr&gt;</span>
    <span class="amend">&lt;tr&gt;&lt;td&gt;Richard Bachman&lt;/td&gt;&lt;td&gt;Stephen King&lt;/td&gt;&lt;/tr&gt;</span>
    <span class="amend">&lt;/table&gt;</span>

&lt;/div&gt;</pre>
<div class="figure align-center">
<img alt="/images/applying-commands-on-an-address-range.png" src="../../../images/applying-commands-on-an-address-range.png">
</div>
</div>
<div class="section" id="id17">
<h2><a class="toc-backref" href="#id27"><span class="sectnum">5</span> Vim 管道命令</a></h2>
<p>这绝对是 Unix 哲学精髓中的“原技巧（meta-trick）”。Vi 允许你使用外部命令对缓冲区中的部分文本进行处理，当你遇到某些在 Vi 中无法做到或者不容易做到的情况时，这是个非常好用的功能。我最喜欢的使用场景是对数据排序——但实际上该功能几乎不受任何限制。</p>
<p><strong>原文本</strong> ：</p>
<pre class="code text"><a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-1"></a>tee &gt;(echo $(wc -l) most recent data) &lt;&lt; EOT
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-2"></a>Aug, 2016 2.11%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-3"></a>Sep, 2016 2.23%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-4"></a>Oct, 2016 2.18%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-5"></a>Nov, 2016 2.31%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-6"></a>Dec, 2016 2.21%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-7"></a>Jan, 2017 2.27%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-8"></a>Mar, 2016 1.78%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-9"></a>Apr, 2016 1.65%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-10"></a>May, 2016 1.79%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-11"></a>Jun, 2016 2.02%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-12"></a>Jul, 2016 2.33%
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-13"></a>EOT
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-14"></a>
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-15"></a>Linux Market Share on Desktop
<a name="rest_code_c9778d9194bb46ac84045abd9ed5cbfc-16"></a>source: https://www.netmarketshare.com
</pre>
<p><strong>命令</strong> ：</p>
<table>
<colgroup>
<col style="width: 56%">
<col style="width: 44%">
</colgroup>
<tbody>
<tr>
<td><p><code class="docutils literal"><span class="pre">:2,/^EOT/-1!sort</span> <span class="pre">-k2n</span> <span class="pre">-k1M</span></code> <a class="footnote-reference brackets" href="#id19" id="id18">6</a></p></td>
<td><p>根据年份和月份排序数据</p></td>
</tr>
<tr>
<td><p><code class="docutils literal">:$r! date "+Data obtained the \%c"</code></p></td>
<td><p>在文件末尾附加 <cite>date</cite> 命令输出</p></td>
</tr>
<tr>
<td><p><code class="docutils literal"><span class="pre">:1,/^EOT/!bash</span></code></p></td>
<td><p>执行内嵌脚本并以结果替换</p></td>
</tr>
</tbody>
</table>
<dl class="footnote brackets">
<dt class="label" id="id19"><span class="brackets"><a class="fn-backref" href="#id18">6</a></span></dt>
<dd>
<p>查看了一下 <cite>sort</cite> 命令的用法，确实强大。Vim 实际上也内置了一个 <cite>sort</cite> 命令，可以根据正则表达式排序。有空再研究一下。——译者注</p>
</dd>
</dl>
<p><strong>修改后的文本</strong> ：</p>
<pre class="literal-block"><span class="amend">Mar, 2016 1.78%</span>
<span class="amend">Apr, 2016 1.65%</span>
<span class="amend">May, 2016 1.79%</span>
<span class="amend">Jun, 2016 2.02%</span>
<span class="amend">Jul, 2016 2.33%</span>
Aug, 2016 2.11%
Sep, 2016 2.23%
Oct, 2016 2.18%
Nov, 2016 2.31%
Dec, 2016 2.21%
Jan, 2017 2.27%
<span class="amend">11 most recent data</span>

Linux Market Share on Desktop
source: <a class="reference external" href="https://www.netmarketshare.com">https://www.netmarketshare.com</a>
<span class="amend">Data obtained the Thu 09 Feb 2017 11:07:34 PM CET</span></pre>
<div class="figure align-center">
<img alt="/images/piping-commands.png" src="../../../images/piping-commands.png">
</div>
</div>
<div class="section" id="id20">
<h2><a class="toc-backref" href="#id28"><span class="sectnum">6</span> 更少键盘输入</a></h2>
<p>撰写一些正式文档时，总会遇到一些不常用却又不得不重复输入的又长又复杂的专用名词，可能是品牌名称或产品名称，某些地名，版权声明……等等。很显然，这些专用名词每一处都应该正确拼写，还要使用完全相同的大小写和标点符号。这时，就很有必要使用 Vim 的缩略词功能。</p>
<p><strong>命令</strong> ：</p>
<table>
<colgroup>
<col style="width: 54%">
<col style="width: 46%">
</colgroup>
<tbody>
<tr>
<td><p><code class="docutils literal">:ab apple Apple Computer, Inc.</code></p></td>
<td><p>定义一个新的缩略词</p></td>
</tr>
<tr>
<td><p><code class="docutils literal">i</code></p></td>
<td><p>切换到 <cite>insert</cite> 模式</p></td>
</tr>
<tr>
<td><p><code class="docutils literal">apple was founded in 1977. &lt;CR&gt;
The apple logo is an apple^V.</code></p></td>
<td><p>键入文本（^V 指 <cite>control-V</cite>）</p></td>
</tr>
</tbody>
</table>
<p><strong>结果</strong> ：</p>
<pre class="literal-block"><span class="amend">Apple Computer, Inc.</span> was founded in 1977.
The <span class="amend">Apple Computer, Inc.</span> logo is an apple.</pre>
<div class="figure align-center">
<img alt="/images/typing-less.png" src="../../../images/typing-less.png">
</div>
</div>
<div class="section" id="id21">
<h2><a class="toc-backref" href="#id29"><span class="sectnum">7</span> Vim 中获取帮助</a></h2>
<p>好吧，我知道有 internet。但是像我一样使用 <cite>man</cite> 命令的人会更青睐内置的帮助系统，你可以根据标题或者命令获取帮助。当你记不清 Vim 命令的准确用法或选项时，当你不确定你需要的是 <cite>Normal</cite> 命令还是 <cite>ex:</cite> 命令时，总是可以到内置帮助中寻求答案。</p>
<p><strong>试试这些</strong> ：</p>
<table>
<colgroup><col style="width: 100%"></colgroup>
<tbody>
<tr>
<td><p><code class="docutils literal">:help help</code></p></td>
</tr>
<tr>
<td><p><code class="docutils literal">:help m</code></p></td>
</tr>
<tr>
<td><p><code class="docutils literal">:help :m</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id22">
<h2><a class="toc-backref" href="#id30"><span class="sectnum">8</span> Vim 中使用脚本</a></h2>
<p>使用 Vi(m) 时，基本上你是在使用另一个底层编辑器 <cite>ex</cite> 的可视化前端，可能你已经注意到以上例子中很多命令均以冒号（:）开头？那是因为他们都是 <cite>ex</cite> 命令。此外，Vi(m) 还有一个相对于很多其它编辑器的优势：你不止可以交互式的使用它，你还可以使用脚本控制它。</p>
<p>为何有人想要这么做？从我自身来说，我发现这是个文本处理自动化的绝好途径。同时，你可以查看来自我硬盘文件的一个典型例子。</p>
<p>这个 <cite>ex</cite> 脚本里面可能有一些看似神秘的命令，不过我可以告诉你，它将会从脚本中移除任何文件头，并替换以从 <cite>NEW.HEADER</cite> 读取的内容——在每个新添加的行前添加 <cite>#</cite> 。毫无疑问地，我本可以使用 <cite>ex</cite> 以外的其它工具来完成这件事。事实上，它甚至是我们之前 Bash 挑战赛的题目之一。但是， <cite>ex</cite> 确实是个很好的选择。</p>
<p><strong>有多神秘</strong> ：</p>
<pre class="code text"><a name="rest_code_73f40d651f6f4f44ad3eb8008212352b-1"></a>ex some.script &lt;&lt; EOT
<a name="rest_code_73f40d651f6f4f44ad3eb8008212352b-2"></a>0pu_
<a name="rest_code_73f40d651f6f4f44ad3eb8008212352b-3"></a>1,/^[^#]/-1d
<a name="rest_code_73f40d651f6f4f44ad3eb8008212352b-4"></a>0r NEW.HEADER
<a name="rest_code_73f40d651f6f4f44ad3eb8008212352b-5"></a>1,.s/^/# /
<a name="rest_code_73f40d651f6f4f44ad3eb8008212352b-6"></a>wq
<a name="rest_code_73f40d651f6f4f44ad3eb8008212352b-7"></a>EOT
</pre>
<p>就像我开篇说的，本文绝不是一篇教程，也不是 Vi(m) 的入门介绍。仅仅是一些 Vim 技巧，来向你展示为何尽管有那么多时髦的代码编辑器，却仍然有人偏偏喜欢 Vim。某种程度上，今天我给你分享了一些我最喜欢的编辑器魔法。但是遵照魔法界的优良传统，我不会向观众揭秘它们究竟是如何工作的。</p>
<p>所以，学徒们，请在下方的评论栏分享你自己的魔法咒语——或者，如果你足够勇敢的话，向观众们解密这些所谓的魔法！</p>
</div>
</div>
        </div>
    </div>
    <div class="post-info">
        <p>引用资源：<a href="https://itsfoss.com/pro-vim-tips/" target="_blank">https://itsfoss.com/pro-vim-tips/</a></p>
        <p>文章链接：<a href="https://macplay.github.io/en/posts/8-ge-vim-ji-qiao-rang-ni-cheng-wei-zhuan-jia-ji-yong-hu/" target="_blank">https://macplay.github.io/en/posts/8-ge-vim-ji-qiao-rang-ni-cheng-wei-zhuan-jia-ji-yong-hu/</a></p>
        <p>发布/更新于：
            <time datetime="2017-11-02 20:44:53 UTC+08:00">
            2017-11-02 20:44
            </time></p>
        <p>版权声明：如无特别说明，本站文章均遵循 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">CC BY-NC-SA 4.0</a> 协议，转载请注明作者及出处。</p>
    </div>
        <div class="post-navigation no-print">
        <div class="ui huge secondary stackable menu">
            <a class="post-nav-item post-nav-previous item" href="../vim-ji-qiao-pi-pei-shu-zi-di-zeng/" title="Previous post"><i class="angle double left icon"></i> Vim 技巧：匹配数字递增</a>
        <div class="right menu">
            <a class="post-nav-item post-nav-next item" href="../wei-he-wo-huan-zai-shi-yong-vim-bian-ji-qi/" title="Next post">【译】为何我还在使用 Vim 编辑器？ <i class="angle double right icon"></i></a>
        </div>
        </div>
    </div>

        <div id="gitalk-container" class="comments-block no-print"></div>
</div>
                    </div>
                </main><div class="footer extra-block no-print">
    <span class="footer_item">
        <a href="../../../pages/you-qing-lian-jie/">友情链接</a>
    </span>
    <span class="footer_item">
        <a href="../../../pages/liu-yan-ban/">留言板</a>
    </span>
    <span class="footer_item">
        <a href="../../../pages/ge-ren-dong-tai/">碎碎念</a>
    </span>
    </div>
            <div class="footer social-link no-print">
            <a href="https://github.com/ashfinal" target="_blank"><i class="grey large github icon"></i></a>
            <a href="http://weibo.com/ashfinal/" target="_blank"><i class="grey large weibo icon"></i></a>
            <a href="mailto://ashfinal@sina.cn" target="_blank"><i class="grey large mail icon"></i></a>
            </div>
        <div class="ui basic center aligned segment no-print">Contents © 2020         <a href="mailto:ashfinal@sina.cn">ashfinal</a> - Powered by         <a href="https://getnikola.com" target="_blank" rel="nofollow">Nikola</a>         </div>

            </div>
            <div class="computer only three wide column no-print">
                <div id="right-side">
                </div>
            </div>
        </div>

        <!-- GoStats JavaScript Based Code -->
        <script type="text/javascript">(function(c,o,m,p,u,t,e){
        c['GoStatsObject']=u;c[u]=c[u]||function(){(c[u].q=c[u].q||[]).push(arguments)},
        c[u].l=1*new Date();t=o.createElement(m);t.async=1;t.src=p;
        e=o.getElementsByTagName(m)[0];e.parentNode.insertBefore(t,e);
        })(window,document,'script','//www.gostats.org/5.js','go');
        go('init',100479892,{'img_counter_type':5,'img_image_type':1});go('send');</script><!-- End GoStats JavaScript Based Code --><script type="text/javascript" src="../../../assets/js/jquery-3.3.1.min.js"></script><script type="text/javascript" src="../../../assets/js/semantic.min.js"></script><script type="text/javascript" src="../../../assets/js/jquery.fancybox.min.js"></script><script type="text/javascript" src="../../../assets/js/cookie.min.js"></script><script>
            $(document).ready(function(){
                $(".ui.dropdown").dropdown();
                $('.ui.accordion').accordion();
                var newstr = $('.cookie.nag').text();
                $('.cookie.nag').nag({
                    key: 'globalnotice',
                    value: newstr
                  });
                $('.image-reference').fancybox();
            });
        </script><script src="../../../assets/js/md5.min.js"></script><script src="../../../assets/js/gitalk.min.js"></script><script>
        const gitalk = new Gitalk({
            clientID: '12fcda845097d895a24c',
            clientSecret: '50ed60cde5f40897205197b4265b474cefbedc49',
            repo: 'macplay.github.io',
            owner: 'macplay',
            admin: ['macplay', 'ashfinal'],
            id: md5(window.location.pathname),
            // facebook-like distraction free mode
            distractionFreeMode: false
        })
        gitalk.render('gitalk-container')
    </script>
</body>
</html>
